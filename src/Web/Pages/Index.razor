@page "/"
@inject IJSRuntime JS

<h3>Photometric Tools</h3>

<p>
    Upload an IES file to convert it to TM-33 format.
</p>

<InputFile OnChange="OnFileSelected" />

@if (!string.IsNullOrEmpty(StatusMessage))
{
    <p>@StatusMessage</p>
}

@code {

    private string? StatusMessage;

    private async Task OnFileSelected(InputFileChangeEventArgs e)
    {
        try
        {
            var file = e.File;
            StatusMessage = $"Selected file: {file.Name} ({file.Size} bytes)";

            // 示例：JS 交互（确认 JS 注入是可用的）
            await JS.InvokeVoidAsync(
                "console.log",
                $"IES file selected: {file.Name}"
            );
        }
        catch (Exception ex)
        {
            StatusMessage = $"Error: {ex.Message}";
        }
    }
}
