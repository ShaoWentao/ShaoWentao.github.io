<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IES Editor</title>
    <base href="/" />
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
    <link href="_content/MudBlazor/MudBlazor.min.css" rel="stylesheet" />
</head>
<body>
    <div id="app">Loading...</div>
    <div id="blazor-error-ui">An error has occurred. <a href="" class="reload">Reload</a> <a class="dismiss">ðŸ—™</a></div>
    <script src="_framework/blazor.webassembly.js"></script>
    <script src="_content/MudBlazor/MudBlazor.min.js"></script>
    <script>
        window.drawPolarCurve = (candelaValues) => {
            const canvas = document.getElementById('iesCanvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const w = canvas.width; const h = canvas.height;
            const radius = Math.min(w, h) / 2 - 20;
            const cx = w / 2; const cy = h / 2;
            ctx.clearRect(0, 0, w, h);
            ctx.strokeStyle = '#e0e0e0'; ctx.beginPath(); ctx.arc(cx, cy, radius, 0, 2 * Math.PI); ctx.stroke();
            if(candelaValues && candelaValues.length > 0) {
                const maxVal = Math.max(...candelaValues);
                ctx.strokeStyle = 'red'; ctx.lineWidth = 2; ctx.beginPath();
                for(let i=0; i<candelaValues.length; i++) {
                    const angle = (i / (candelaValues.length - 1)) * Math.PI + Math.PI/2; 
                    const r = (candelaValues[i] / maxVal) * radius;
                    const x = cx + r * Math.cos(angle); const y = cy + r * Math.sin(angle);
                    if(i===0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
                }
                ctx.stroke();
            }
        };
    </script>
</body>
</html>
