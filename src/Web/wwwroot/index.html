<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IES Editor</title>
    
    <base href="/" />
    
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
    <link href="_content/MudBlazor/MudBlazor.min.css" rel="stylesheet" />
</head>

<body>
    <div id="app">
        <svg class="loading-progress">
            <circle r="40%" cx="50%" cy="50%" />
            <circle r="40%" cx="50%" cy="50%" />
        </svg>
        <div class="loading-progress-text">Loading...</div>
    </div>

    <div id="blazor-error-ui">
        An error has occurred.
        <a href="" class="reload">Reload</a>
        <a class="dismiss">ğŸ—™</a>
    </div>

    <script src="_framework/blazor.webassembly.js"></script>
    
    <script src="_content/MudBlazor/MudBlazor.min.js"></script>

    <script>
        window.drawPolarCurve = (c0, c90) => {
            const canvas = document.getElementById('iesCanvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            // ç®€å•çš„é˜²æ­¢æŠ¥é”™å¤„ç†
            if (!c0 || c0.length === 0) return;
            
            const w = canvas.width;
            const h = canvas.height;
            const radius = Math.min(w, h) / 2 - 20;
            const cx = w / 2;
            const cy = h / 2;
            
            ctx.clearRect(0, 0, w, h);
            
            // ç”»åœ†åœˆ
            ctx.strokeStyle = '#ddd';
            ctx.beginPath();
            ctx.arc(cx, cy, radius, 0, 2 * Math.PI);
            ctx.stroke();

            // ç”» C0 (çº¢çº¿)
            const maxVal = Math.max(...c0);
            ctx.strokeStyle = 'red';
            ctx.lineWidth = 2;
            ctx.beginPath();
            for (let i = 0; i < c0.length; i++) {
                const angle = (i / (c0.length - 1)) * Math.PI + (Math.PI/2); // ç®€å•çš„ä¸‹åŠåœ†æ˜ å°„
                const r = (c0[i] / maxVal) * radius;
                ctx.lineTo(cx + r * Math.cos(angle), cy + r * Math.sin(angle));
            }
            ctx.stroke();
        };
    </script>
</body>

</html>
